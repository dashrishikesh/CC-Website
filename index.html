<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Caitanya Caritamrta</title>
    <style>
        :root {
            --primary-color: #2563eb;
            --bg-color: #f8fafc;
            --text-color: #1e293b;
            --sidebar-width: 250px;
        }

        body {
            font-family: system-ui, -apple-system, sans-serif;
            margin: 0;
            padding: 0;
            background-color: var(--bg-color);
            color: var(--text-color);
            line-height: 1.6;
            display: flex;
        }

        .main-heading {
            text-align: center;
            color: var(--primary-color);
            font-size: 2.5rem;
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid var(--primary-color);
        }

        .sidebar {
            width: var(--sidebar-width);
            height: 100vh;
            position: fixed;
            background: white;
            padding: 2rem;
            box-shadow: 2px 0 5px rgba(0, 0, 0, 0.1);
            overflow-y: auto;
        }

        .sidebar h2 {
            color: var(--primary-color);
            margin-bottom: 1.5rem;
        }

        .chapter-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .chapter-list li {
            margin-bottom: 0.5rem;
        }

        .chapter-list a {
            color: var(--text-color);
            text-decoration: none;
            display: block;
            padding: 0.5rem;
            border-radius: 4px;
            transition: background-color 0.2s;
        }

        .chapter-list a:hover {
            background-color: var(--bg-color);
            color: var(--primary-color);
        }

        .chapter-list a.active {
            background-color: var(--primary-color);
            color: white;
        }

        .main-content {
            margin-left: var(--sidebar-width);
            padding: 2rem;
            max-width: 800px;
            width: 100%;
        }

        .chapter-title {
            color: var(--primary-color);
            margin-bottom: 2rem;
        }

        .chapter-content {
            background: white;
            padding: 2rem;
            border-radius: 8px;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1);
        }

        .navigation-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 2rem;
        }

        .nav-button {
            padding: 0.75rem 1.5rem;
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            text-decoration: none;
            transition: background-color 0.2s;
        }

        .nav-button:hover {
            background-color: #1d4ed8;
        }

        .nav-button:disabled {
            background-color: #94a3b8;
            cursor: not-allowed;
        }

        @media (max-width: 768px) {
            .sidebar {
                transform: translateX(-100%);
                transition: transform 0.3s;
                z-index: 1000;
            }

            .sidebar.active {
                transform: translateX(0);
            }

            .main-content {
                margin-left: 0;
                padding: 1rem;
            }

            .menu-toggle {
                position: fixed;
                top: 1rem;
                left: 1rem;
                z-index: 1001;
                padding: 0.5rem;
                background: var(--primary-color);
                color: white;
                border: none;
                border-radius: 4px;
                cursor: pointer;
            }

            .main-heading {
                font-size: 2rem;
                margin-top: 3rem;
            }
        }
    </style>
</head>
<body>
    <button class="menu-toggle" id="menuToggle">â˜°</button>
    
    <nav class="sidebar" id="sidebar">
        <h2>Chapters</h2>
        <ul class="chapter-list" id="chapterList">
            <!-- Chapters will be loaded here -->
        </ul>
    </nav>

    <main class="main-content">
        <h1 class="main-heading">Caitanya Caritamrta</h1>
        <h2 class="chapter-title" id="chapterTitle">Loading...</h2>
        <div class="chapter-content" id="chapterContent">
            <p>Loading chapter content...</p>
        </div>
        <div class="navigation-buttons">
            <a href="#" class="nav-button" id="prevButton">Previous Chapter</a>
            <a href="#" class="nav-button" id="nextButton">Next Chapter</a>
        </div>
    </main>

    <script>
        // Configuration - update this with your chapters
        const chapters = [
            { id: 1, title: 'Chapter 1', file: 'chapter1.txt' },
            { id: 2, title: 'Chapter 2', file: 'chapter2.txt' },
            { id: 3, title: 'Chapter 3', file: 'chapter3.txt' },
            // Add more chapters as needed
        ];

        let currentChapter = 1;

        // DOM Elements
        const chapterList = document.getElementById('chapterList');
        const chapterTitle = document.getElementById('chapterTitle');
        const chapterContent = document.getElementById('chapterContent');
        const prevButton = document.getElementById('prevButton');
        const nextButton = document.getElementById('nextButton');
        const menuToggle = document.getElementById('menuToggle');
        const sidebar = document.getElementById('sidebar');

        // Generate chapter list
        function generateChapterList() {
            chapterList.innerHTML = chapters.map(chapter => `
                <li>
                    <a href="#chapter${chapter.id}" 
                       data-chapter="${chapter.id}" 
                       ${currentChapter === chapter.id ? 'class="active"' : ''}>
                        ${chapter.title}
                    </a>
                </li>
            `).join('');

            // Add click events to chapter links
            document.querySelectorAll('.chapter-list a').forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    const chapterId = parseInt(link.dataset.chapter);
                    loadChapter(chapterId);
                });
            });
        }

        // Load chapter content
        async function loadChapter(chapterId) {
            currentChapter = chapterId;
            const chapter = chapters.find(c => c.id === chapterId);
            
            if (!chapter) return;

            // Update URL without page reload
            window.history.pushState({}, '', `#chapter${chapterId}`);
            
            // Update UI
            chapterTitle.textContent = chapter.title;
            chapterContent.innerHTML = '<p>Loading chapter content...</p>';
            
            try {
                const response = await fetch(chapter.file);
                if (!response.ok) throw new Error('Failed to load chapter');
                const content = await response.text();
                chapterContent.innerHTML = `<p>${content.replace(/\n/g, '</p><p>')}</p>`;
            } catch (error) {
                chapterContent.innerHTML = '<p>Error loading chapter content. Please try again.</p>';
            }

            // Update navigation buttons
            prevButton.style.visibility = chapterId > 1 ? 'visible' : 'hidden';
            nextButton.style.visibility = chapterId < chapters.length ? 'visible' : 'hidden';

            // Update active chapter in sidebar
            document.querySelectorAll('.chapter-list a').forEach(link => {
                link.classList.toggle('active', parseInt(link.dataset.chapter) === chapterId);
            });
        }

        // Navigation button events
        prevButton.addEventListener('click', (e) => {
            e.preventDefault();
            if (currentChapter > 1) {
                loadChapter(currentChapter - 1);
            }
        });

        nextButton.addEventListener('click', (e) => {
            e.preventDefault();
            if (currentChapter < chapters.length) {
                loadChapter(currentChapter + 1);
            }
        });

        // Mobile menu toggle
        menuToggle.addEventListener('click', () => {
            sidebar.classList.toggle('active');
        });

        // Handle direct navigation via URL hash
        function handleHashChange() {
            const hash = window.location.hash;
            const chapterId = parseInt(hash.replace('#chapter', '')) || 1;
            loadChapter(chapterId);
        }

        window.addEventListener('hashchange', handleHashChange);

        // Initial load
        generateChapterList();
        handleHashChange();
    </script>
</body>
</html>
